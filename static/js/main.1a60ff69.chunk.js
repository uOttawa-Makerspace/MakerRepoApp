(this["webpackJsonpmakerepo-react-app"]=this["webpackJsonpmakerepo-react-app"]||[]).push([[0],{18:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(20),o=n.n(s),a=(n(18),n(5)),i=Object(r.createContext)(null),l={config:{api_url:"https://makerepo.com"}},d=n(0),u=function(){var e=Object(r.useContext)(i),t=(e.user,e.setUser),n=Object(r.useState)(""),c=Object(a.a)(n,2),s=c[0],o=c[1],u=Object(r.useState)(""),b=Object(a.a)(u,2),h=b[0],p=b[1];return Object(d.jsx)("div",{children:Object(d.jsxs)("div",{className:"flex flex-col w-full px-4 py-8 bg-white rounded-lg shadow dark:bg-gray-800 sm:px-6 md:px-8 lg:px-10",children:[Object(d.jsx)("div",{className:"self-center mb-6 text-xl font-light text-gray-600 sm:text-2xl dark:text-white",children:"Login To Your MakerRepo Account"}),Object(d.jsx)("div",{className:"mt-8",children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("".concat(l.config.api_url,"/login_authentication"),{method:"post",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username_email:s,password:h})}).then((function(e){return e.json().then((function(e){t(e.user)}))})).catch((function(e){console.error(e)}))},children:[Object(d.jsx)("div",{className:"flex flex-col mb-2",children:Object(d.jsxs)("div",{className:"flex relative",children:[Object(d.jsx)("span",{className:"rounded-l-md inline-flex  items-center px-3 border-t bg-white border-l border-b  border-gray-300 text-gray-500 shadow-sm text-sm",children:Object(d.jsx)("svg",{width:"15",height:"15",fill:"currentColor",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg",children:Object(d.jsx)("path",{d:"M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"})})}),Object(d.jsx)("input",{type:"text",id:"sign-in-email",value:s,onChange:function(e){return o(e.target.value)},name:"username_email",className:" rounded-r-lg flex-1 appearance-none border border-gray-300 w-full py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-sm text-base focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Your email or username"})]})}),Object(d.jsx)("div",{className:"flex flex-col mb-6",children:Object(d.jsxs)("div",{className:"flex relative",children:[Object(d.jsx)("span",{className:"rounded-l-md inline-flex  items-center px-3 border-t bg-white border-l border-b  border-gray-300 text-gray-500 shadow-sm text-sm",children:Object(d.jsx)("svg",{width:"15",height:"15",fill:"currentColor",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg",children:Object(d.jsx)("path",{d:"M1376 768q40 0 68 28t28 68v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h32v-320q0-185 131.5-316.5t316.5-131.5 316.5 131.5 131.5 316.5q0 26-19 45t-45 19h-64q-26 0-45-19t-19-45q0-106-75-181t-181-75-181 75-75 181v320h736z"})})}),Object(d.jsx)("input",{type:"password",id:"sign-in-password",value:h,onChange:function(e){return p(e.target.value)},name:"password",className:" rounded-r-lg flex-1 appearance-none border border-gray-300 w-full py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-sm text-base focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Your password"})]})}),Object(d.jsx)("div",{className:"flex w-full",children:Object(d.jsx)("button",{type:"submit",className:"py-2 px-4 bg-primary hover:bg-primary focus:ring-primary focus:ring-offset-primary-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2  rounded-lg ",children:"Login"})})]})})]})})},b=n(23),h=n(3),p=n(11),j=n.n(p),x=n(12),f=function(){var e=Object(r.useContext)(i),t=(e.user,e.setUser);return Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:function(e){fetch("".concat(l.config.api_url,"/logout"),{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json().then(function(){var e=Object(x.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){console.error(e)}))},children:"Logout"})})},g=n(13),m=function(){var e=Object(r.useContext)(i),t=(e.user,e.setUser,Object(g.useHistory)()),n=Object(r.useState)(null),c=Object(a.a)(n,2),s=c[0],o=c[1],u=Object(r.useState)(null),b=Object(a.a)(u,2),h=b[0],p=b[1],j=Object(r.useState)(null),x=Object(a.a)(j,2),f=x[0],m=x[1];Object(r.useEffect)((function(){O()}));var O=function(){fetch("".concat(l.config.api_url,"/staff_dashboard"),{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json().then((function(e){o(JSON.stringify(e))}))})).catch((function(e){console.error(e)}))},y=function(){fetch("".concat(l.config.api_url,"/staff_dashboard/search?query=").concat(f),{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json().then((function(e){p(JSON.stringify(e))}))})).catch((function(e){console.error(e)}))};return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:Object(d.jsx)("select",{value:null!==s&&JSON.parse(s).space.id,onChange:function(e){return t=e.target.value,void fetch("".concat(l.config.api_url,"/staff_dashboard/change_space?space_id=").concat(t),{method:"PUT",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json().then((function(e){O()}))})).catch((function(e){console.error(e)}));var t},className:"block w-52 text-gray-700 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:null!==s&&JSON.parse(s).space_list.map((function(e){return Object(d.jsx)("option",{value:e[1],children:e[0]})}))})}),Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:Object(d.jsx)("button",{type:"button",onClick:function(){return O()},className:"py-2 px-4 bg-primary focus:ring-primary text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg ",children:"Refresh Space"})})}),Object(d.jsx)("div",{className:"px-4 sm:px-8 py-4 overflow-x-auto",children:Object(d.jsx)("div",{className:"inline-block min-w-full shadow rounded-lg overflow-hidden",children:Object(d.jsxs)("table",{className:"min-w-full leading-normal",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{scope:"col",className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm font-normal",children:"Name"}),Object(d.jsx)("th",{scope:"col",className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm font-normal",children:"Email"}),Object(d.jsx)("th",{scope:"col",className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm font-normal",children:"Flagged?"}),Object(d.jsx)("th",{scope:"col",className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm font-normal",children:"Sign Out"})]})}),Object(d.jsx)("tbody",{children:null!==s&&JSON.parse(s).space_users.map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:Object(d.jsx)("div",{className:"flex items-center",children:Object(d.jsx)("div",{className:"ml-3",children:Object(d.jsx)("p",{onClick:function(){return n=e.username,void t.push("/profile/".concat(n));var n},className:"text-gray-900 whitespace-no-wrap",children:e.name})})})}),Object(d.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:Object(d.jsx)("p",{className:"text-gray-900 whitespace-no-wrap",children:e.email})}),Object(d.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:Object(d.jsx)("p",{className:"text-gray-900 whitespace-no-wrap",children:e.flagged?"Yes":"No"})}),Object(d.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:Object(d.jsx)("button",{type:"button",onClick:function(){return t=e.username,void fetch("".concat(l.config.api_url,"/staff_dashboard/remove_users?dropped_users[]=").concat(t),{method:"PUT",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){O()})).catch((function(e){console.error(e)}));var t},className:"py-2 px-4 bg-red-600 hover:bg-red-700 focus:ring-red-500 focus:ring-offset-red-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg ",children:"Sign Out"})})]})}))})]})})}),Object(d.jsx)("div",{className:"relative",children:Object(d.jsx)("input",{type:"text",id:"rounded-email",onChange:function(e){return m(e.target.value)},className:" rounded-lg border-transparent flex-1 appearance-none border border-gray-300 w-full py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-sm text-base focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Username, Name"})}),Object(d.jsx)("button",{type:"button",onClick:function(){return y()},className:"py-2 px-4  bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500 focus:ring-offset-indigo-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2  rounded-lg ",children:"Search"}),Object(d.jsx)("div",{className:"px-4 sm:px-8 py-4 overflow-x-auto",children:Object(d.jsx)("div",{className:"inline-block min-w-full shadow rounded-lg overflow-hidden",children:Object(d.jsxs)("table",{className:"min-w-full leading-normal",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{scope:"col",className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm font-normal",children:"Name"}),Object(d.jsx)("th",{scope:"col",className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm font-normal",children:"Email"}),Object(d.jsx)("th",{scope:"col",className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm font-normal",children:"Flagged?"}),Object(d.jsx)("th",{scope:"col",className:"px-5 py-3 bg-white border-b border-gray-200 text-gray-800 text-left text-sm font-normal",children:"Sign In"})]})}),Object(d.jsx)("tbody",{children:null!==h&&JSON.parse(h).map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:Object(d.jsx)("div",{className:"flex items-center",children:Object(d.jsx)("div",{className:"ml-3",children:Object(d.jsx)("p",{className:"text-gray-900 whitespace-no-wrap",children:e.name})})})}),Object(d.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:Object(d.jsx)("p",{className:"text-gray-900 whitespace-no-wrap",children:e.email})}),Object(d.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:Object(d.jsx)("p",{className:"text-gray-900 whitespace-no-wrap",children:e.flagged?"Yes":"No"})}),Object(d.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:Object(d.jsx)("button",{type:"button",onClick:function(){return t=e.username,void fetch("".concat(l.config.api_url,"/staff_dashboard/add_users?added_users[]=").concat(t),{method:"PUT",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){O(),y()})).catch((function(e){console.error(e)}));var t},className:"py-2 px-4 bg-green-600 hover:bg-green-700 focus:ring-green-500 focus:ring-offset-green-200 text-white w-full transition ease-in duration-200 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg ",children:"Sign In"})})]})}))})]})})})]})},O=function(){var e=Object(r.useContext)(i),t=e.user,n=(e.setUser,Object(r.useState)(null)),c=Object(a.a)(n,2),s=c[0],o=c[1];return Object(d.jsxs)("div",{children:[Object(d.jsxs)("h1",{children:["Hello ",t.name]}),Object(d.jsx)("button",{onClick:function(){fetch("".concat(l.config.api_url,"/badges/populate_badge_list?user_id=1"),{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json().then((function(e){o(JSON.stringify(e))}))})).catch((function(e){console.error(e)}))},children:"Get badges"}),null!==s&&Object(d.jsx)("p",{children:s}),Object(d.jsx)(m,{}),Object(d.jsx)(f,{})]})},y=function(){var e=Object(r.useContext)(i);e.user,e.setUser;return Object(d.jsx)("div",{children:"This is the header"})},w=function(){var e=Object(r.useContext)(i),t=(e.user,e.setUser,Object(r.useState)(null)),n=Object(a.a)(t,2),c=(n[0],n[1],Object(r.useState)(null)),s=Object(a.a)(c,2),o=(s[0],s[1],Object(r.useState)(null)),l=Object(a.a)(o,2),u=l[0],b=l[1];Object(g.useParams)().username;function h(){return(h=Object(x.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("NDEFReader"in window)){e.next=13;break}return e.prev=1,t=new NDEFReader,e.next=5,t.scan();case 5:console.log("> Scan started"),t.addEventListener("readingerror",(function(){console.log("Argh! Cannot read data from the NFC tag. Try another one?")})),t.addEventListener("reading",(function(e){var t=e.message,n=e.serialNumber;console.log("> Serial Number: ".concat(n)),console.log("> Records: (".concat(t.records.length,")")),b(n)})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Argh! "+e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:function(){return function(){return h.apply(this,arguments)}()},children:"Scan RFID"}),u]})};var v=function(){var e=Object(r.useState)(null),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),o=Object(a.a)(s,2),p=o[0],j=o[1],x=Object(r.useMemo)((function(){return{user:n,setUser:c}}),[n,c]);return Object(r.useEffect)((function(){fetch("".concat(l.config.api_url,"/check_signed_in"),{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json().then((function(e){return"true"===e.signed_in}))})).catch((function(e){console.error(e)})).then((function(e){!0===e?(c(JSON.parse(window.localStorage.getItem("user"))),console.log("signed in")):c(null)})),j(!0)}),[]),Object(r.useEffect)((function(){null!==n&&window.localStorage.setItem("user",JSON.stringify(n))}),[n]),Object(d.jsx)(b.a,{children:Object(d.jsx)("div",{children:Object(d.jsx)(i.Provider,{value:x,children:!1===p?Object(d.jsx)("div",{children:"Loading..."}):Object(d.jsxs)("div",{children:[Object(d.jsx)(y,{}),null==n?Object(d.jsx)(h.Route,{path:"/",exact:!0,component:u}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(h.Route,{path:"/",exact:!0,component:O}),Object(d.jsx)(h.Route,{path:"/profile/:username",children:Object(d.jsx)(w,{})})]})]})})})})};o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(v,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.1a60ff69.chunk.js.map